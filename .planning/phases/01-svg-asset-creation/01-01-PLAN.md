---
phase: 01-svg-asset-creation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - gsnake-web/assets/sprites.svg
autonomous: false

must_haves:
  truths:
    - "sprites.svg contains exactly 10 <symbol> definitions, one for each CellType value"
    - "Each symbol uses only geometric SVG elements (rect, circle, ellipse, polygon, polyline, path, line) with no <filter>, <feGaussianBlur>, or <feDropShadow> elements"
    - "FloatingFood and FallingFood are visually distinguishable through different color palettes"
    - "All 10 symbols use identical viewBox dimensions"
    - "Total file size is under 20KB and no individual symbol exceeds 2KB"
  artifacts:
    - path: "gsnake-web/assets/sprites.svg"
      provides: "SVG sprite sheet with 10 game object symbol definitions"
      contains: "<symbol id=\"Empty\""
    - path: "gsnake-web/assets/sprites.svg"
      provides: "All CellType symbols"
      contains: "<symbol id=\"Spike\""
  key_links:
    - from: "gsnake-web/assets/sprites.svg"
      to: "CellType enum values in gsnake-web/types/models.ts"
      via: "Symbol id attributes match CellType string values exactly"
      pattern: "id=\"(Empty|SnakeHead|SnakeBody|Food|Obstacle|Exit|FloatingFood|FallingFood|Stone|Spike)\""
---

<objective>
Create the complete SVG sprite sheet containing all 10 game object symbols for gSnake.

Purpose: This is the foundational asset for the entire SVG visual upgrade. All subsequent phases (rendering infrastructure, game integration, performance validation) depend on these symbol definitions existing and being correct.

Output: `gsnake-web/assets/sprites.svg` containing 10 optimized, geometric SVG symbols matching every CellType enum value.
</objective>

<execution_context>
@/home/nntin/.claude/get-shit-done/workflows/execute-plan.md
@/home/nntin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@gsnake-web/types/models.ts
@gsnake-web/components/Cell.svelte
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create sprites.svg with all 10 game object symbols</name>
  <files>gsnake-web/assets/sprites.svg</files>
  <action>
Create directory `gsnake-web/assets/` and file `gsnake-web/assets/sprites.svg`.

The file must be a valid SVG with a root `<svg>` element containing exactly 10 `<symbol>` children. Each symbol's `id` attribute must match the exact CellType string value from `gsnake-web/types/models.ts`:

Symbol IDs (must match exactly): Empty, SnakeHead, SnakeBody, Food, Obstacle, Exit, FloatingFood, FallingFood, Stone, Spike

All symbols must use `viewBox="0 0 32 32"` (consistent 32x32 coordinate space).

Design each symbol using ONLY geometric SVG primitives (rect, circle, ellipse, polygon, polyline, path, line). Do NOT use any SVG filters (no `<filter>`, `<feGaussianBlur>`, `<feDropShadow>`, `<feColorMatrix>`, etc.). Do NOT use `<image>` or `<foreignObject>`. Do NOT use CSS `filter` properties. Fills and strokes only.

The root `<svg>` element should have `xmlns="http://www.w3.org/2000/svg"` and `style="display:none"` (it will be inlined into the DOM in Phase 2; the display:none prevents it from rendering as a visible element).

Design guidelines for each symbol (use the current Cell.svelte colors as baseline palette):

1. **Empty** - Transparent/minimal. A simple light gray (#F5F5F5) filled rect covering the full viewBox. Represents empty grid space.

2. **SnakeHead** - Blue (#2196F3) rounded rectangle filling most of the viewBox (2px inset) with two small white circle eyes positioned in the upper third. Must be immediately recognizable as a head/face.

3. **SnakeBody** - Lighter blue (#64B5F6) rounded rectangle filling most of the viewBox (2px inset). Simpler than head -- no eyes, slightly smaller corner radius. A subtle darker blue (#42A5F5) horizontal stripe across the middle for texture.

4. **Food** - Red (#FF5722) circle centered in the viewBox (radius ~12) with a small green (#4CAF50) stem/leaf shape (2 small lines or a tiny triangle) at the top. Apple-like appearance.

5. **FloatingFood** - Orange (#FF9800) circle (radius ~10) centered in viewBox. Add 3-4 small upward-pointing chevron/arrow lines above the circle (in lighter orange #FFB74D) to indicate "floating/rising". This is the key visual distinction from FallingFood.

6. **FallingFood** - Yellow (#FFEB3B) circle (radius ~10) centered in viewBox. Add 3-4 small downward-pointing chevron/arrow lines below the circle (in darker yellow #FBC02D) to indicate "falling/dropping". Must look similar-but-different from FloatingFood through both color AND directional indicator.

7. **Obstacle** - Dark gray (#424242) rectangle filling the full viewBox with a subtle cross-hatch pattern: two diagonal lines (stroke #616161, stroke-width 1) from corner to corner, creating an X pattern. Looks solid and impassable.

8. **Exit** - Green (#4CAF50) rectangle with a white doorway/arch shape cut out of the center (a white rect with rounded top, or a path). Should suggest "way out" or "door".

9. **Stone** - Brown (#795548) rounded rectangle (large corner radius ~6) with 2-3 small irregular lighter brown (#8D6E63) circles/ellipses inside to suggest rock texture. Heavier/more rounded than Obstacle.

10. **Spike** - Red (#F44336) background with a sharp upward-pointing triangle (white or dark red #B71C1C) centered in the cell. The triangle should have a very pointed top (narrow, tall) to convey danger. Alternatively, 3 smaller triangles pointing up like spikes.

Keep each symbol's SVG markup concise -- aim for under 500 bytes per symbol to stay well within the 2KB limit. Use short hex colors (#FFF not #FFFFFF where possible). Avoid unnecessary attributes (no transform="translate(0,0)", no opacity="1").
  </action>
  <verify>
Run: `ls -la gsnake-web/assets/sprites.svg` -- file must exist.
Run: `wc -c gsnake-web/assets/sprites.svg` -- total size must be under 20480 bytes (20KB).
Run: `grep -c '<symbol' gsnake-web/assets/sprites.svg` -- must output exactly 10.
Run: `grep -oP 'id="[^"]*"' gsnake-web/assets/sprites.svg | sort` -- must list all 10 CellType IDs.
Run: `grep -c '<filter\|feGaussianBlur\|feDropShadow\|feColorMatrix' gsnake-web/assets/sprites.svg` -- must output 0 (no filters).
Run: `grep -oP 'viewBox="[^"]*"' gsnake-web/assets/sprites.svg | sort -u` -- must output exactly one unique viewBox value.
  </verify>
  <done>
gsnake-web/assets/sprites.svg exists with 10 symbol definitions. All symbol IDs match CellType enum values exactly. All symbols share the same viewBox. No filter elements present. File is under 20KB total.
  </done>
</task>

<task type="auto">
  <name>Task 2: Validate individual symbol sizes and create preview HTML</name>
  <files>gsnake-web/assets/sprites-preview.html</files>
  <action>
Create a standalone HTML preview file at `gsnake-web/assets/sprites-preview.html` that:

1. Inlines the sprites.svg content directly into the HTML body
2. Renders each of the 10 symbols in a grid layout using `<svg><use href="#SymbolId"/></svg>` references
3. Labels each symbol with its CellType name
4. Uses a simple grid (5 columns x 2 rows) with each cell showing the symbol at 64x64 pixels on a light gray background
5. Includes a dark background variant row showing each symbol at 64x64 on #333 background (to verify visibility on both light and dark backgrounds)

This file is a development-only preview tool. It must NOT be referenced by any game code.

After creating the preview file, validate each symbol's size by extracting individual symbols and checking byte count. Each symbol (from opening `<symbol` to closing `</symbol>`) must be under 2048 bytes (2KB).

Write a brief validation log to stdout confirming:
- Total file size
- Per-symbol byte count
- Whether all pass the 2KB threshold
  </action>
  <verify>
Run: `ls -la gsnake-web/assets/sprites-preview.html` -- file must exist.
Open `gsnake-web/assets/sprites-preview.html` in browser -- all 10 symbols should render visibly (this will be verified in the checkpoint task).
For each symbol, extract its content and verify: `python3 -c "import re; svg=open('gsnake-web/assets/sprites.svg').read(); symbols=re.findall(r'(<symbol[^>]*id=\"(\w+)\".*?</symbol>)', svg, re.DOTALL); [print(f'{name}: {len(content)} bytes {\"PASS\" if len(content) < 2048 else \"FAIL\"}') for content, name in symbols]"` -- all must show PASS.
  </verify>
  <done>
sprites-preview.html exists and renders all 10 symbols. Every individual symbol is under 2KB. Validation log confirms all size thresholds met.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual verification of sprite sheet</name>
  <what-built>Complete SVG sprite sheet (gsnake-web/assets/sprites.svg) with 10 game object symbols, plus a preview page (gsnake-web/assets/sprites-preview.html) showing all symbols rendered at 64x64 on both light and dark backgrounds.</what-built>
  <how-to-verify>
1. Open `gsnake-web/assets/sprites-preview.html` in your browser (just double-click or open as file)
2. Verify all 10 symbols are visible and render correctly
3. Check that each symbol is visually recognizable:
   - SnakeHead: blue with eyes
   - SnakeBody: lighter blue with stripe
   - Food: red apple-like circle with green stem
   - FloatingFood: orange circle with upward indicators
   - FallingFood: yellow circle with downward indicators
   - Obstacle: dark gray with cross-hatch
   - Exit: green with white doorway
   - Stone: brown rounded with texture spots
   - Spike: red with sharp upward triangle(s)
   - Empty: light gray (subtle)
4. Confirm FloatingFood and FallingFood are clearly distinguishable (different colors + different directional indicators)
5. Verify symbols look reasonable on both light and dark backgrounds
  </how-to-verify>
  <resume-signal>Type "approved" if all symbols look correct, or describe any symbols that need adjustment (e.g., "Spike needs to look sharper", "FloatingFood and FallingFood too similar")</resume-signal>
</task>

</tasks>

<verification>
Phase 1 success criteria from ROADMAP.md:
1. sprites.svg contains 10 symbol definitions matching all CellType values -- verified by grep count and ID listing
2. FloatingFood visually distinct from FallingFood -- verified by human checkpoint
3. Total bundle under 20KB, each symbol under 2KB -- verified by size checks
4. All symbols use consistent viewBox -- verified by unique viewBox check
5. No filter/blur/drop-shadow effects -- verified by grep for filter elements
</verification>

<success_criteria>
- gsnake-web/assets/sprites.svg exists with exactly 10 `<symbol>` definitions
- Symbol IDs are: Empty, SnakeHead, SnakeBody, Food, Obstacle, Exit, FloatingFood, FallingFood, Stone, Spike
- All symbols share viewBox="0 0 32 32"
- No `<filter>`, `<feGaussianBlur>`, `<feDropShadow>` elements in the file
- Total file size < 20KB, each symbol < 2KB
- FloatingFood and FallingFood are visually distinguishable (human verified)
- gsnake-web/assets/sprites-preview.html exists for visual inspection
</success_criteria>

<output>
After completion, create `.planning/phases/01-svg-asset-creation/01-01-SUMMARY.md`
</output>
