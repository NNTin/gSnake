---
phase: 03-game-integration
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "SpriteLoader component is mounted in App.svelte and inlines SVG symbols into DOM (INTEG-01)"
    - "Cell components render SVG use-elements driven by frame store data (INTEG-02)"
    - "Player can see all game object types rendered as SVGs during actual gameplay"
    - "Spike cells render with visible partial transparency (opacity < 1.0)"
    - "Rapid game events (snake movement) trigger frame updates without visible lag"
    - "GameGrid component uses primitive CellType props not object references"
  artifacts: []
  key_links:
    - from: "gsnake-web/components/App.svelte"
      to: "gsnake-web/components/SpriteLoader.svelte"
      via: "component mount rendering SpriteLoader before GameContainer"
      pattern: "<SpriteLoader"
    - from: "gsnake-web/components/GameGrid.svelte"
      to: "gsnake-web/components/Cell.svelte"
      via: "primitive CellType string prop"
      pattern: "type=.cell."
---

<objective>
Visually verify that SVG rendering works correctly during live gameplay across multiple levels, confirming all game object types render, transparency is visible on hazard objects, and frame updates are smooth during rapid movement.

Purpose: Phase 3 success criteria require visual confirmation that cannot be automated — a human must verify that SVGs look correct during gameplay, transparency creates visual depth, and there is no visible lag. This checkpoint consolidates all visual verification into a single human review.

Output: Human-verified confirmation that Phase 3 integration is visually correct.
</objective>

<execution_context>
@/home/nntin/.claude/get-shit-done/workflows/execute-plan.md
@/home/nntin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-game-integration/03-01-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Visual verification of SVG game integration</name>
  <files>gsnake-web/components/Cell.svelte, gsnake-web/components/SpriteLoader.svelte, gsnake-web/components/GameGrid.svelte</files>
  <action>
Start the dev server (`cd gsnake-web && npm run dev`) and present the game at http://localhost:3000/ for human visual verification. No code changes in this task — this is a verification checkpoint.

What was built (across Phase 2 and plan 03-01):
- INTEG-01: SpriteLoader component integrated in App.svelte (implemented in Phase 2, line 185 of App.svelte renders `<SpriteLoader />` before GameContainer)
- INTEG-02: Cell.svelte connected to frame store via GameGrid's $frame auto-subscription (implemented in Phase 2, GameGrid subscribes to frame store and passes primitive CellType to Cell)
- INTEG-03: GameGrid passes primitive CellType props to Cell components (not object references)
- INTEG-04: Cell.svelte renders per-CellType SVGs with opacity-based transparency for visual depth
- INTEG-06: SpriteLoader.svelte has defensive onDestroy cleanup
- All 68 existing tests pass
  </action>
  <verify>
Human performs these visual checks:

1. Start the dev server: `cd gsnake-web && npm run dev`
2. Open http://localhost:3000/ in browser

**INTEG-01/INTEG-02 verification (SpriteLoader + frame store connection):**
3. Open Chrome DevTools > Elements tab. Verify the DOM contains inlined SVG symbols from sprites.svg (search for `<symbol id="SnakeHead"`) — confirms INTEG-01 (SpriteLoader is active)
4. Verify game grid cells contain `<svg><use href="#SnakeHead" /></svg>` elements (not colored divs) — confirms INTEG-02 (Cell renders from frame store data)

**Level 1 verification (basic objects):**
5. Verify you see: blue SnakeHead with eyes, blue SnakeBody segments, red Food circle, dark Obstacle blocks, green Exit door
6. Use arrow keys to move snake — verify movement is smooth with no lag or stutter
7. Verify the bottom row of Obstacles appears slightly transparent (opacity 0.9 — subtle but visible compared to fully opaque snake)

**Multi-level verification (all object types):**
8. Click "Levels" button and select a level that has Spikes, Stones, FloatingFood, or FallingFood (try levels 3+ which tend to have more object types)
9. Verify Spikes render as red triangles with VISIBLE partial transparency (opacity 0.8 — noticeably more transparent than obstacles)
10. Verify Stones render as brown rounded rectangles with slight transparency (opacity 0.85)
11. If FloatingFood is present, verify it renders as orange circles with upward chevrons at full opacity

**Rapid movement test:**
12. Play a level with gravity/falling mechanics (if available) or rapidly press arrow keys
13. Verify frame updates are instant with no visible delay between key press and grid update

**Memory check (optional but recommended):**
14. Open Chrome DevTools > Memory tab
15. Take a heap snapshot, switch levels, take another snapshot
16. Compare — no significant memory increase expected

Resume signal: Type "approved" if all checks pass, or describe any visual issues found.
  </verify>
  <done>
Human confirms: INTEG-01 verified (SpriteLoader inlines SVG symbols in DOM), INTEG-02 verified (Cell components render from frame store data), all game object types render as recognizable SVGs, transparency is visible on Spike/Stone/Obstacle cells, no visible lag during rapid movement, and level switching works without issues.
  </done>
</task>

</tasks>

<verification>
Human confirms:
1. INTEG-01: SpriteLoader component is active in App.svelte (SVG symbols present in DOM)
2. INTEG-02: Cell components render SVG use-elements from frame store data (not colored divs)
3. All visible CellType objects render as recognizable SVGs (not colored squares)
4. Spike/Stone/Obstacle have visible transparency differences
5. No visible lag during rapid movement
6. Level switching works without issues
</verification>

<success_criteria>
- Human verifies INTEG-01 (SpriteLoader integrated) and INTEG-02 (Cell connected to frame store) via DOM inspection
- Human approves visual correctness of SVG rendering during gameplay
- All game object types are visually recognizable as their intended objects
- Transparency creates perceptible visual depth on hazard/environmental objects
- No performance issues during rapid gameplay
</success_criteria>

<output>
After completion, create `.planning/phases/03-game-integration/03-02-SUMMARY.md`
</output>
