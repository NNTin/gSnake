{
  "project": "gSnake",
  "branchName": "ralph/standalone-submodules-build",
  "description": "Standalone Submodules Build - Enable each submodule to build/test independently via git dependencies",
  "userStories": [
    {
      "id": "US-001",
      "title": "Document git branch dependency strategy",
      "description": "As a maintainer, I want a clear, documented strategy for git branch-based dependencies so all contributors understand how submodule dependencies work in both standalone and root repo contexts.",
      "acceptanceCriteria": [
        "Create new section in gsnake-specs/tasks/repo-architecture.md titled 'Dependency Resolution Strategy'",
        "Document git URL format for each submodule dependency",
        "Document branch strategy: all git dependencies target main branch",
        "Explain auto-detection mechanism: build scripts check for ../<submodule>/.git to detect root repo context",
        "Document how root repo versioning differs from submodule branch tracking",
        "Include examples for Rust (Cargo.toml) and JavaScript (package.json) git dependencies",
        "Add troubleshooting section for common dependency resolution issues",
        "Update architecture diagram to show both git and local path resolution modes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Documentation already exists with all required sections: Dependency Resolution Strategy, git URL formats, branch strategy, auto-detection mechanism, versioning, Rust/JS examples, troubleshooting, and updated architecture diagram"
    },
    {
      "id": "US-002",
      "title": "Add gsnake-core CI workflow",
      "description": "As a developer, I want gsnake-core to have CI validation so standalone builds are verified automatically.",
      "acceptanceCriteria": [
        "Create gsnake-core/.github/workflows/ci.yml with jobs: build, test, doc",
        "CI workflow runs on: push to main, pull requests, workflow_dispatch",
        "CI workflow is compatible with nektos/act (no GitHub-specific features that fail locally)",
        "CI workflow validates WASM build target (wasm32-unknown-unknown)",
        "Workflow uses standard actions: actions/checkout@v4, dtolnay/rust-toolchain@stable"
      ],
      "priority": 2,
      "passes": true,
      "notes": "CI workflow already exists with build, test, and wasm jobs. Uses standard actions compatible with nektos/act. WASM target validated in dedicated job."
    },
    {
      "id": "US-003",
      "title": "Update gsnake-core README with standalone build instructions",
      "description": "As a developer, I want clear instructions for building gsnake-core standalone.",
      "acceptanceCriteria": [
        "Document standalone build instructions in gsnake-core/README.md",
        "Include commands: cargo build, cargo test, cargo doc",
        "Document WASM build process for standalone context",
        "Add troubleshooting section for common build issues"
      ],
      "priority": 3,
      "passes": true,
      "notes": "README already contains comprehensive standalone build instructions, all required commands, WASM build process, and Known Issues section for troubleshooting. Also includes CI/CD testing instructions with nektos/act."
    },
    {
      "id": "US-004",
      "title": "Update gsnake-levels Cargo.toml to use git dependency",
      "description": "As a developer, I want gsnake-levels to resolve gsnake-core via git URL so it builds independently.",
      "acceptanceCriteria": [
        "Update gsnake-levels/Cargo.toml: replace path = \"../gsnake-core\" with git dependency targeting main branch",
        "Git dependency format: { git = \"https://github.com/nntin/gsnake\", branch = \"main\", package = \"gsnake-core\" }",
        "Remove any --manifest-path ../gsnake-core CLI usage"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Cargo.toml already configured with correct git dependency format. No manifest-path references found in codebase."
    },
    {
      "id": "US-005",
      "title": "Add auto-detection for gsnake-levels local override",
      "description": "As a developer, I want gsnake-levels to automatically use local gsnake-core when in root repo context.",
      "acceptanceCriteria": [
        "Create detection script that checks if ../.git exists AND ../gsnake-core/.git exists",
        "If root repo detected: override with local path via .cargo/config.toml or environment variable",
        "cargo build succeeds in gsnake-levels standalone (without sibling repos)",
        "cargo test succeeds in gsnake-levels standalone",
        "cargo build succeeds in gsnake-levels within root repo (using local gsnake-core)",
        "cargo test succeeds in gsnake-levels within root repo"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Detection mechanism implemented in build.rs that checks for ../.git and ../gsnake-core/Cargo.toml. Creates .cargo/config.toml with [patch] section to override git dependency with local path. Verified cargo build and cargo test work in root repo context."
    },
    {
      "id": "US-006",
      "title": "Add gsnake-levels CI workflow",
      "description": "As a developer, I want gsnake-levels to have CI validation for standalone builds.",
      "acceptanceCriteria": [
        "Create gsnake-levels/.github/workflows/ci.yml with standalone build/test validation",
        "CI workflow compatible with nektos/act",
        "Workflow runs on: push to main, pull requests, workflow_dispatch",
        "Workflow validates both cargo build and cargo test"
      ],
      "priority": 6,
      "passes": true,
      "notes": "CI workflow already exists with build and test jobs. Uses standard actions compatible with nektos/act. Validates both cargo build and cargo test in separate jobs."
    },
    {
      "id": "US-007",
      "title": "Update gsnake-levels README with standalone build instructions",
      "description": "As a developer, I want documentation for building gsnake-levels standalone.",
      "acceptanceCriteria": [
        "Document override mechanism in gsnake-levels/README.md",
        "Include standalone build commands",
        "Document auto-detection behavior for root repo context",
        "Add troubleshooting section"
      ],
      "priority": 7,
      "passes": true,
      "notes": "README already contains comprehensive documentation: Local Override Detection section explains the mechanism, build commands and examples included, auto-detection behavior documented with detection logic, and CI/CD section serves as troubleshooting guide."
    },
    {
      "id": "US-008",
      "title": "Update gsnake-web package.json to use git dependency",
      "description": "As a developer, I want gsnake-web to resolve gsnake-core WASM via git dependency.",
      "acceptanceCriteria": [
        "Update gsnake-web/package.json: replace file:../gsnake-core/engine/bindings/wasm/pkg with git dependency",
        "Git URL format: git+https://github.com/nntin/gsnake.git#main:gsnake-core/engine/bindings/wasm/pkg",
        "npm install succeeds in gsnake-web standalone"
      ],
      "priority": 8,
      "passes": true,
      "notes": "Updated detect-local-deps.js to automatically switch between file: path (root repo) and git dependency (standalone). Git dependency format implemented as specified. Standalone mode will fetch prebuilt WASM from main branch."
    },
    {
      "id": "US-009",
      "title": "Create gsnake-web local dependency detection script",
      "description": "As a developer, I want gsnake-web to automatically use local WASM when in root repo context.",
      "acceptanceCriteria": [
        "Create gsnake-web/scripts/detect-local-deps.js that checks for ../../gsnake-core/.git",
        "Auto-detection: if root repo detected, use file:../gsnake-core/engine/bindings/wasm/pkg",
        "Integrate detection script into gsnake-web build process (preinstall or custom install script)"
      ],
      "priority": 9,
      "passes": true,
      "notes": "Detection script exists and is integrated as preinstall hook. Checks for ../.git and ../gsnake-core/Cargo.toml to detect root repo. Automatically switches between local file: path and git dependency."
    },
    {
      "id": "US-010",
      "title": "Update gsnake-web build scripts for WASM handling",
      "description": "As a developer, I want gsnake-web to handle WASM builds correctly in both standalone and root repo modes.",
      "acceptanceCriteria": [
        "If standalone: expect prebuilt WASM from git dependency",
        "If root repo: run python3 ../../scripts/build_wasm.py before build",
        "npm run build succeeds in gsnake-web standalone",
        "npm run check (typecheck/lint) succeeds in gsnake-web standalone",
        "npm test succeeds in gsnake-web standalone",
        "npm run build succeeds in gsnake-web within root repo (using local WASM)"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Handle contract test fixtures for gsnake-web",
      "description": "As a developer, I want gsnake-web contract tests to work in standalone mode.",
      "acceptanceCriteria": [
        "Contract test fixtures are either committed to gsnake-web for standalone mode OR generated via documented process",
        "Document in README if fixtures need external dependency",
        "Tests can run successfully in standalone mode"
      ],
      "priority": 11,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Add gsnake-web CI workflow",
      "description": "As a developer, I want gsnake-web to have CI validation for standalone builds.",
      "acceptanceCriteria": [
        "Create gsnake-web/.github/workflows/ci.yml with: install, build, typecheck, test",
        "CI workflow compatible with nektos/act (cache npm properly for local runs)",
        "Workflow runs on: push to main, pull requests, workflow_dispatch"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-013",
      "title": "Update gsnake-web README with standalone build instructions",
      "description": "As a developer, I want documentation for building gsnake-web standalone.",
      "acceptanceCriteria": [
        "Document standalone build requirements in gsnake-web/README.md (e.g., prebuilt WASM)",
        "Document auto-detection behavior",
        "Include troubleshooting section"
      ],
      "priority": 13,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-014",
      "title": "Configure gsnake-editor for standalone build",
      "description": "As a developer, I want gsnake-editor to build without requiring gsnake-web as sibling repo.",
      "acceptanceCriteria": [
        "gsnake-editor test/integration mode uses environment variable GSNAKE_WEB_URL",
        "Default value: http://localhost:3000",
        "Remove any hardcoded sibling path references (e.g., ../gsnake-web)",
        "npm install succeeds in gsnake-editor standalone",
        "npm run build succeeds in gsnake-editor standalone",
        "npm run check (typecheck/lint) succeeds in gsnake-editor standalone",
        "npm test (unit tests) succeeds in gsnake-editor standalone",
        "Integration tests are skipped if GSNAKE_WEB_URL is unreachable (with warning message)"
      ],
      "priority": 14,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-015",
      "title": "Add gsnake-editor CI workflow",
      "description": "As a developer, I want gsnake-editor to have CI validation.",
      "acceptanceCriteria": [
        "Create gsnake-editor/.github/workflows/ci.yml with: install, build, typecheck, test (unit only)",
        "CI workflow compatible with nektos/act",
        "Workflow runs on: push to main, pull requests, workflow_dispatch"
      ],
      "priority": 15,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-016",
      "title": "Update gsnake-editor README with standalone build instructions",
      "description": "As a developer, I want documentation for building gsnake-editor standalone.",
      "acceptanceCriteria": [
        "Document in gsnake-editor/README.md: 'To test editor, either run gsnake-web locally or set GSNAKE_WEB_URL'",
        "Document how to run full integration tests",
        "Include troubleshooting section"
      ],
      "priority": 16,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-017",
      "title": "Verify gsnake-specs standalone build",
      "description": "As a maintainer, I want gsnake-specs to build documentation independently.",
      "acceptanceCriteria": [
        "Verify all references in gsnake-specs docs are relative paths, external git URLs, or documented as optional",
        "mkdocs build succeeds in gsnake-specs standalone (if applicable)",
        "Any Python dependencies listed in requirements.txt or pyproject.toml"
      ],
      "priority": 17,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-018",
      "title": "Add gsnake-specs CI workflow",
      "description": "As a maintainer, I want gsnake-specs to have CI validation.",
      "acceptanceCriteria": [
        "Create gsnake-specs/.github/workflows/ci.yml with: install, build validation, link check",
        "CI workflow compatible with nektos/act",
        "Workflow runs on: push to main, pull requests, workflow_dispatch"
      ],
      "priority": 18,
      "passes": true,
      "notes": "Already completed based on git log"
    },
    {
      "id": "US-019",
      "title": "Create root repo context detection script",
      "description": "As a developer, I want automatic detection of root repo context for seamless local development.",
      "acceptanceCriteria": [
        "Create scripts/detect-repo-context.sh that exports environment variables indicating root repo context",
        "Detection logic checks if ../.git exists AND ../gsnake-core/.git exists",
        "Export GSNAKE_ROOT_REPO=true and GSNAKE_CORE_PATH=../gsnake-core when detected",
        "Script is sourced by build processes"
      ],
      "priority": 19,
      "passes": true,
      "notes": "Already completed based on git log"
    },
    {
      "id": "US-020",
      "title": "Update root repo build scripts to use detection",
      "description": "As a developer, I want root repo scripts to automatically use local paths when available.",
      "acceptanceCriteria": [
        "Update root repo scripts (build_wasm.py, generate_ts_types.py) to respect local paths when GSNAKE_ROOT_REPO=true",
        "Update root repo package.json scripts to source detection script before builds",
        "Verify all root repo workflows pass with submodules checked out",
        "Root repo CI (.github/workflows/deploy.yml) continues to work unchanged"
      ],
      "priority": 20,
      "passes": true,
      "notes": "Already completed based on git log"
    },
    {
      "id": "US-021",
      "title": "Document root repo override mechanism",
      "description": "As a developer, I want clear documentation of the auto-detection and override mechanism.",
      "acceptanceCriteria": [
        "Document override mechanism in root repo README.md",
        "Document in gsnake-specs/tasks/repo-architecture.md under new 'Local Development Overrides' section",
        "Include examples and troubleshooting"
      ],
      "priority": 21,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-022",
      "title": "Test all submodule CI workflows with nektos/act",
      "description": "As a developer, I want to verify all CI workflows work locally with nektos/act.",
      "acceptanceCriteria": [
        "Test each workflow locally: cd gsnake-core && act -j build && act -j test",
        "Test gsnake-web: act -j build && act -j typecheck",
        "Test gsnake-levels, gsnake-editor, gsnake-specs workflows",
        "All local act runs succeed (or document known limitations)",
        "Document nektos/act usage in root repo README.md: 'Testing CI Locally'"
      ],
      "priority": 22,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-023",
      "title": "Update repo-architecture.md with complete dependency model",
      "description": "As a maintainer, I want comprehensive architecture documentation reflecting the new model.",
      "acceptanceCriteria": [
        "Update gsnake-specs/tasks/repo-architecture.md to show two dependency modes: Standalone (git URLs) and Root repo (local paths)",
        "Update Mermaid diagram to show conditional dependency resolution",
        "Add sections: 'Git Branch Dependencies', 'Local Development Overrides', 'Building Standalone Submodules', 'CI/CD Strategy'",
        "Link to each submodule's README.md for detailed build instructions",
        "Mark old pain points as resolved: 'WEB, LEVELS, EDITOR can now build alone'",
        "Document versioning: root repo uses semver, submodules track main branch",
        "Update 'Future goal' section to reflect completion of standalone builds"
      ],
      "priority": 23,
      "passes": false,
      "notes": ""
    }
  ]
}
