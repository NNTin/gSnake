{
  "project": "gSnake",
  "branchName": "ralph/pre-commit-hooks",
  "description": "Pre-Commit Hooks for gSnake Submodules - Add opt-in pre-commit hooks for format, lint, typecheck, and build checks",
  "userStories": [
    {
      "id": "US-001",
      "title": "Create shared hooks README for gsnake-levels",
      "description": "As a maintainer, I want to enable shared hooks from `.github/hooks` so I can run consistent checks before committing.",
      "acceptanceCriteria": [
        "Create gsnake-levels/.github/hooks/ directory",
        "Add gsnake-levels/.github/hooks/README.md explaining how to enable hooks with `git config core.hooksPath .github/hooks`",
        "README includes verification step: `git config core.hooksPath` should show `.github/hooks`",
        "README includes disable step: `git config --unset core.hooksPath`",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Add pre-commit hook for gsnake-levels",
      "description": "As a maintainer, I want a pre-commit hook for `gsnake-levels` that runs format, lint, typecheck, and build without tests.",
      "acceptanceCriteria": [
        "Create gsnake-levels/.github/hooks/pre-commit executable shell script",
        "Hook runs `cargo fmt --all -- --check` and fails on formatting issues",
        "Hook runs `cargo clippy --all-targets -- -D warnings` and fails on warnings",
        "Hook runs `cargo check` and fails on typecheck errors",
        "Hook runs `cargo build` and fails on build errors",
        "Hook does NOT run `cargo test`",
        "Script includes comments explaining it avoids tests for speed",
        "Script exits immediately on first failure (set -e)",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Create shared hooks README for gsnake-web",
      "description": "As a maintainer, I want to enable shared hooks from `.github/hooks` so I can run consistent checks before committing.",
      "acceptanceCriteria": [
        "Create gsnake-web/.github/hooks/ directory",
        "Add gsnake-web/.github/hooks/README.md explaining how to enable hooks with `git config core.hooksPath .github/hooks`",
        "README includes verification step: `git config core.hooksPath` should show `.github/hooks`",
        "README includes disable step: `git config --unset core.hooksPath`",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Add build:hook script to gsnake-web package.json",
      "description": "As a maintainer, I need a build command that skips tests for pre-commit hooks.",
      "acceptanceCriteria": [
        "Add `build:hook` script to gsnake-web/package.json",
        "Script runs build without triggering prebuild tests",
        "Script uses `vite build` or equivalent that does NOT run vitest/playwright",
        "Running `npm run build:hook` completes successfully without tests",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Add pre-commit hook for gsnake-web",
      "description": "As a maintainer, I want a pre-commit hook for `gsnake-web` that runs format, lint, typecheck, and build without tests.",
      "acceptanceCriteria": [
        "Create gsnake-web/.github/hooks/pre-commit executable shell script",
        "Hook runs `npm run format:check` (or `npx prettier --check .`) and fails on formatting issues",
        "Hook runs `npm run lint` (or `npx eslint .`) and fails on lint errors",
        "Hook runs `npm run check` (svelte-check) and fails on typecheck errors",
        "Hook runs `npm run build:hook` and fails on build errors",
        "Hook does NOT run `npm test`, `vitest`, or `playwright`",
        "Script includes comments explaining it avoids tests for speed",
        "Script exits immediately on first failure (set -e)",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Create shared hooks README for gsnake-specs",
      "description": "As a maintainer, I want to enable shared hooks from `.github/hooks` so I can run consistent checks before committing.",
      "acceptanceCriteria": [
        "Create gsnake-specs/.github/hooks/ directory",
        "Add gsnake-specs/.github/hooks/README.md explaining how to enable hooks with `git config core.hooksPath .github/hooks`",
        "README includes verification step: `git config core.hooksPath` should show `.github/hooks`",
        "README includes disable step: `git config --unset core.hooksPath`",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Add Python tooling config for gsnake-specs",
      "description": "As a maintainer, I want Python-based Markdown tooling configured so hooks can format and lint Markdown files.",
      "acceptanceCriteria": [
        "Create gsnake-specs/pyproject.toml with mdformat and markdownlint dependencies",
        "Add mdformat to [tool.mdformat] configuration if needed",
        "Add basic markdownlint config if needed (or use defaults)",
        "Document in README or pyproject.toml how to install: `pip install -e .` or similar",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Add pre-commit hook for gsnake-specs",
      "description": "As a maintainer, I want a pre-commit hook for `gsnake-specs` that formats and lints Markdown using Python tooling.",
      "acceptanceCriteria": [
        "Create gsnake-specs/.github/hooks/pre-commit executable shell script",
        "Hook checks if Python/pip is available, exits with helpful message if not",
        "Hook runs `mdformat --check .` and fails on formatting issues",
        "Hook runs markdownlint or equivalent on Markdown files and fails on lint errors",
        "Hook does NOT run tests",
        "Script includes comments explaining it formats/lints Markdown only",
        "Script exits immediately on first failure (set -e)",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Document hook commands in all READMEs",
      "description": "As a maintainer, I want clarity on which checks are run and that tests are excluded.",
      "acceptanceCriteria": [
        "Update gsnake-levels/.github/hooks/README.md to list exact commands run by pre-commit hook",
        "Update gsnake-web/.github/hooks/README.md to list exact commands run by pre-commit hook",
        "Update gsnake-specs/.github/hooks/README.md to list exact commands run by pre-commit hook",
        "Each README explicitly states: 'Tests are NOT run in pre-commit hooks for speed'",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Test all hooks end-to-end",
      "description": "As a maintainer, I want to verify all hooks work correctly before deploying.",
      "acceptanceCriteria": [
        "Enable hooks in gsnake-levels: `cd gsnake-levels && git config core.hooksPath .github/hooks`",
        "Enable hooks in gsnake-web: `cd gsnake-web && git config core.hooksPath .github/hooks`",
        "Enable hooks in gsnake-specs: `cd gsnake-specs && git config core.hooksPath .github/hooks`",
        "Run pre-commit hook manually in each submodule: `.github/hooks/pre-commit`",
        "Verify all hooks pass on clean repos",
        "Introduce a formatting error in each submodule and verify hook catches it",
        "Document test results in progress.txt",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    }
  ]
}
