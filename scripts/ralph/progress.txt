# Ralph Progress Log
Started: Sun Feb  1 18:25:00 CET 2026
---

## Codebase Patterns
- The gSnake project uses npm scripts for format/lint in TypeScript/Svelte submodules
- Format checks use prettier with `--check` flag for validation, `--write` for fixing
- Svelte 5 projects require ESLint flat config with typescript-eslint and eslint-plugin-svelte
- When adding ESLint to Svelte projects, fix common issues: add keys to {#each} blocks, avoid `any` types, remove unused variables
- Pre-commit hooks in submodules follow pattern: format check → lint → typecheck → build (NO tests)
---

## Sun Feb  1 18:35:00 CET 2026 - US-001
- Implemented format and lint scripts for gsnake-editor
- Files changed:
  - package.json (added format, format:check, lint scripts)
  - package-lock.json (installed prettier, eslint, eslint-plugin-svelte, @eslint/js, typescript-eslint, globals)
  - Created .prettierrc, .prettierignore, eslint.config.js
  - Fixed linting issues in server.ts, integration.test.ts, and Svelte components (added keys to each blocks)
- **Learnings for future iterations:**
  - Prettier and ESLint configs should be created from scratch for Svelte 5 projects (no legacy configs exist)
  - ESLint 9+ requires flat config format (eslint.config.js) not the old .eslintrc format
  - Svelte {#each} blocks require keys - use unique identifiers like `(entity.type)` or `(`${row}-${col}`)`
  - Replace `any` types with `unknown` for better type safety
  - The format script should have both `--write` for fixing and `--check` for CI/validation
  - After installing prettier, always run it to format the codebase before linting
---

## Sun Feb  1 19:16:42 CET 2026 - US-002
- Created pre-commit hook for gsnake-editor
- Files changed:
  - gsnake-editor/.github/hooks/pre-commit (new file, executable)
- Hook follows established pattern: format check → lint → typecheck → build (NO tests)
- Tested hook successfully - all checks pass
- Committed in submodule and updated parent repo reference
- **Learnings for future iterations:**
  - Pre-commit hooks for TypeScript/Svelte submodules use npm scripts: format:check, lint, check, build
  - Always test hooks before committing to ensure all commands work
  - gsnake-editor is a submodule - must commit in submodule first, then update parent repo reference
  - Use `git push` after each commit to update CI pipeline (per Ralph instructions)
  - Pre-commit hooks must be executable (chmod +x)
---
## Sun Feb  1 19:36:00 CET 2026 - US-003
- Created hooks README for gsnake-editor following existing submodule pattern
- Files changed:
  - gsnake-editor/.github/hooks/README.md (new file)
- README includes:
  - Enable command: `git config core.hooksPath .github/hooks`
  - Verification: `git config core.hooksPath`
  - Disable: `git config --unset core.hooksPath`
  - Lists all 4 commands run by pre-commit: format:check, lint, check, build
  - Note about tests not running in hooks
- Committed in submodule and updated parent repo reference
- **Learnings for future iterations:**
  - Hook READMEs follow consistent format across all submodules (gsnake-web, gsnake-levels, gsnake-specs, gsnake-editor)
  - README structure: Enabling Hooks → Verification → Disabling Hooks → Available Hooks (with numbered list of commands)
  - Always include note explaining tests are excluded for speed
  - CI pipeline still passing after changes (18/18 tests)
---
## Sun Feb  1 20:06:00 CET 2026 - US-004
- Created pre-commit hook for parent gSnake project validating gsnake-core workspace only
- Files changed:
  - .github/hooks/pre-commit (new file, executable)
  - gsnake-core/engine/core/src/models.rs (added #[allow(clippy::too_many_arguments)])
  - gsnake-core/engine/bindings/wasm/src/lib.rs (fixed clippy doc_markdown, uninlined_format_args, single_match_else)
  - gsnake-core/engine/bindings/cli/src/levels.rs (moved levels_path before test module, added #[must_use])
  - gsnake-core formatting changes (cargo fmt --all)
- Hook runs: cargo fmt --check → cargo clippy → cargo check → cargo build (NO tests)
- Clippy configured with allowances for pedantic style warnings to keep focus on important issues
- All checks pass successfully
- **Learnings for future iterations:**
  - Parent repo pre-commit hooks follow same pattern as submodules: format check → lint → typecheck → build
  - Cargo clippy can have many pedantic warnings in existing codebases - use -A flags to allow minor style issues
  - Allowed clippy lints: uninlined-format-args, ptr-arg, wildcard-imports, unnested-or-patterns, too-many-lines, ignored-unit-patterns, match-same-arms
  - Pre-commit hooks for parent repo check gsnake-core workspace only, NOT submodules
  - Must run cargo fmt before clippy to fix formatting issues first
  - rustfmt.toml in gsnake-core uses nightly-only features, causing warnings but not errors
---
