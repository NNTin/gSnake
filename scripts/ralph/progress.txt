# Ralph Progress Log
Started: Tue Jan 27 22:11:52 CET 2026
## Codebase Patterns
- **Git Dependencies**: Use branch-based git dependencies for submodules (not tags/commits)
- **Auto-detection**: Build scripts check for ../.git and sibling submodules to detect root repo context
- **Rust Overrides**: Use .cargo/config.toml with [patch] section to override git deps with local paths
- **JavaScript Overrides**: Use preinstall scripts to dynamically modify package.json based on detection
- **CI Strategy**: Per-submodule CI validates standalone builds; root CI validates integration
- **nektos/act**: Use act for local CI testing - compatible with standard GitHub Actions
- **Documentation Location**: gsnake-specs/tasks/repo-architecture.md is the central doc for dependency architecture
- **"Typecheck passes"**: For markdown-only changes, this means ensuring valid markdown syntax (no specific command)
---

## 2026-01-27 22:15 - US-001
- Implemented comprehensive "Dependency Resolution Strategy" section in gsnake-specs/tasks/repo-architecture.md
- Files changed: gsnake-specs/tasks/repo-architecture.md
- **Learnings for future iterations:**
  - The repo-architecture.md file is the central documentation for dependency management
  - Documentation should include both Rust (Cargo.toml) and JavaScript (package.json) examples
  - Auto-detection mechanism is a key feature: checks for ../.git to determine root repo context
  - Acceptance criteria "Typecheck passes" refers to ensuring markdown syntax is valid (no specific typecheck command in root)
---

## 2026-01-27 22:17 - US-002
- Implemented comprehensive "Troubleshooting" section in gsnake-specs/tasks/repo-architecture.md
- Files changed: gsnake-specs/tasks/repo-architecture.md
- **Learnings for future iterations:**
  - Troubleshooting section covers 5 main categories: git deps not found, local override not working, WASM build fails, forcing standalone mode, verifying dependency mode
  - Each troubleshooting item includes symptoms, causes/solutions, and verification commands
  - Important to provide both Rust and JavaScript examples for verification commands
---

## 2026-01-27 22:20 - US-003
- Updated architecture Mermaid diagram in gsnake-specs/tasks/repo-architecture.md
- Files changed: gsnake-specs/tasks/repo-architecture.md
- **Learnings for future iterations:**
  - Mermaid diagram now clearly shows two modes: Root Repository (local paths) and Standalone (git deps)
  - Used emojis (üè† and üåê) and color coding to visually distinguish the modes
  - Removed old "cannot build alone" pain points - now marked as resolved
  - Added legend explaining dependency types
  - Diagram is more focused and easier to understand than the previous version
---

## 2026-01-27 23:00 - US-004
- Validated gsnake-core standalone build capabilities
- All build commands tested and passed:
  - cargo build: successful
  - cargo test: 62 tests passed
  - cargo doc --no-deps: documentation generated
  - wasm-pack build: WASM bindings compiled successfully
- Updated gsnake-core/README.md with comprehensive standalone build instructions
- Files changed: gsnake-core/README.md, scripts/ralph/prd.json, scripts/ralph/progress.txt
- **Learnings for future iterations:**
  - gsnake-core is a Rust workspace with 3 members (core, cli, wasm)
  - Profile warnings for non-root packages in workspaces are expected and harmless
  - WASM build requires wasm-pack and wasm32-unknown-unknown target
  - WASM output goes to engine/bindings/wasm/pkg/
  - All tests run in workspace context (62 total tests across all crates)
  - The README should document prerequisites, build commands, and known issues
  - gsnake-core has no external git dependencies - all dependencies are from crates.io
---

## 2026-01-27 23:00 - US-005
- Implemented comprehensive CI workflow for gsnake-core
- Created gsnake-core/.github/workflows/ci.yml with three jobs:
  - **build**: Validates cargo build with Rust stable
  - **test**: Runs cargo test on all workspace crates
  - **wasm**: Builds WASM bindings with wasm-pack
- All jobs use actions/checkout@v4, dtolnay/rust-toolchain@stable
- Added caching for cargo registry, index, and build artifacts for faster CI runs
- Tested workflow syntax validation with nektos/act dryrun
- Files changed: gsnake-core/.github/workflows/ci.yml, gsnake-core/README.md
- **Learnings for future iterations:**
  - gsnake-core is NOT a git submodule - it's a directory in the root repo (no .git file/dir)
  - Changes must be committed from root repo, not from within gsnake-core directory
  - nektos/act requires Docker and interactive configuration on first run
  - act config file location: ~/.config/act/actrc
  - Use medium-sized image: `ghcr.io/catthehacker/ubuntu:act-latest` (~500MB)
  - act dryrun is useful for validating workflow syntax without running full jobs
  - Known act limitations: cache actions may not work exactly as on GitHub, network operations differ
  - CI workflow should checkout to `path: gsnake-core` to maintain directory structure
  - workflow_dispatch trigger cannot be tested locally with act
  - Added CI/CD section to README.md with act usage instructions and limitations
---

